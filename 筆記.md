# 筆記
## class component vs. function component with useState()
---
- class component (優勢為 可以清楚明確看到整個架構，缺點繁瑣)
``` type=javascript
 class test extend react.component {
     constructor (props) {
         super(props)
         this.state = {
             A: null,
             B: null
         }
         this.changeA = this.changeA.bind(this)
         this.changeB = this.changeB.bind(this)
     }
     changeA (value) {
         setState({A: value})
     }
    changeB (value) {
         setState({B: value})
     }
     render () {
         return (
             <div>xxxxxx</div>
         )
     }
 }
```
- function component 優點: 輕量化，簡單不反繁瑣
``` type=javascript 
function test () {
    const [A, changeA] = useState(null)
    changeA(123)
    const [B, changeB] = useState(null)
    changeB(456)
    return (
        div>xxxxxx</div>
    )
}
```
## react hooks 僅 function component 能夠使用且不能再迴圈使用，要在 scope 的最上層
---
- useState() ex: const [A, changeAFunction] = useState(defaultValue) 宣告 state
- useEffect 掌管生命週期
    ``` type=javascript
    useEffect(() => {
    /* 下面是 componentDidMount 和  componentDidUpdate */
    
    
    /* 上面是 componentDidMount 和  componentDidUpdate */
    
    return () => {
      /* 下面是 componentWillUnmount */
      
      
      /* 上面是 componentWillUnmount */
    };
    
    }, [dependencies參數]); /* 第二個參數是用來限定當哪些變數被改變時useEffect要觸發 空則無限制，全部變都會觸發 */
    ```
- useContext 類似 store 在component 值域範圍內宣告，搭配createContext，可在孫子中使用
  ``` type=javascript
    const slogan =  'super star'
    const Content = createContext(slogan)
    export function GrandFather(props) {
        return (
            <Content.Provider value={slogan}>
                <SideBar /> 
            </Content.Provider>
        )
    }
    function SideBar(props) {
        return (
        <SideBarButton />
        )
    }
    function SideBarButton(props) {
        const title = useContext(Content)
        return (
            <div>
                {title}
            </div>
        )
    }
  ```
## 其他小知識
---
- fetch es7 https://ithelp.ithome.com.tw/articles/10221020
  - 注意其中的 header 設定 與 then 後處理的 json   
- jwt 使用
-  生命週期 （class component）constructor() -> static getDerivedStateFromProps() -> render() -> 渲染DOM -> ......(渲染後的生命週期)
componentWillMount(暫時棄用)
https://ithelp.ithome.com.tw/articles/10222857 （可直接參考流程圖）
componentDidMount => componentDidUpdate(prevProps, prevState, snapshot) => 